<!DOCTYPE html>
<html ng-app="plunker">

  <head>
    <meta charset="utf-8" />
    <title>Energie Österreich</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="bower_components/angular-material/angular-material.css">
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="bower_components/nvd3/build/nv.d3.css">

    <script src="bower_components/angular/angular.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.6.8/angular-locale_de-at.js"></script>
 
    <script src="bower_components/d3/d3.js"></script>
    <script src="bower_components/nvd3/build/nv.d3.js"></script> <!-- or use another assembly -->
    <script src="bower_components/angular-nvd3/dist/angular-nvd3.js"></script>

    <script src="bower_components/moment/moment.js"></script>
    <script src="bower_components/angular-moment/angular-moment.js"></script>
    <script src="bower_components/angular-aria/angular-aria.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/angular-material/angular-material.js"></script>


    <script src="services/dataManager.js"></script>
    <script src="services/manipulate.js"></script>
    <script src="directives/chart.js"></script>
    <script src="directives/pie.js"></script>
    <script src="directives/hydrostorage.js"></script>
    <script src="app.js"></script>
  </head>

  <body ng-controller="MainCtrl">
    <md-toolbar class="md-hue-2">
      <div class="md-toolbar-tools">
        <a href="/">
        <img src="images/logo.png" style="height:36px;"/>
        </a>
        <h2 flex md-truncate>Stromerzeugung Österreich - {{ctrl.titledate}}</h2>
        <md-input-container class="md-block">
          <md-tooltip md-direction="left">Multiply installed PV</md-tooltip>
          <label style="color:white">Solar</label> 
          <input type="number" min="1" ng-model="mutate.Solar" style="width:50px;color:white" ng-model-options='{ debounce: 200 }'>
        </md-input-container>
        <md-input-container class="md-block" lex-gt-sm>
          <md-tooltip md-direction="left">Multiply installed Wind</md-tooltip>
          <label style="color:white">Wind</label> 
          <input type="number" min="1" ng-model="mutate.Wind" style="width:50px;color:white" ng-model-options='{ debounce: 200 }'>
        </md-input-container>
         <md-input-container class="md-block" lex-gt-sm>
          <md-tooltip md-direction="left">Electric Transport percentage</md-tooltip>
          <label style="color:white">EV%</label> 
          <input type="number" min="1" ng-model="mutate.Transport" style="width:50px;color:white" ng-model-options='{ debounce: 200 }'>
        </md-input-container>
 
        <md-button class="md-icon-button" aria-label="Favorite" ng-click="previouseDay()">
          <md-icon ng-bind="'navigate_before'"></md-icon>
        </md-button>
        <md-button class="md-icon-button" aria-label="Favorite" ng-click="nextDay()">
          <md-icon ng-bind="'navigate_next'"></md-icon>
        </md-button>

        <md-button class="md-icon-button" aria-label="More" ng-click="reload()">
          <md-icon ng-bind="'cached'"></md-icon>
        </md-button>
        <md-datepicker ng-if="ctrl.timetype=='month'" ng-model="ctrl.myDate" md-placeholder="Enter date" md-min-date="ctrl.mindate" md-mode="month"></md-datepicker>
        <md-datepicker ng-if="ctrl.timetype!=='month'" ng-model="ctrl.myDate" md-placeholder="Enter date" md-min-date="ctrl.minDate" ></md-datepicker>
      </div>
    </md-toolbar>
   <md-radio-group ng-model="ctrl.timetype" style="position:absolute;right:20px;top:100px">
      <md-radio-button value="day" class="md-primary">day</md-radio-button>
      <md-radio-button value="week"> week </md-radio-button>
      <md-radio-button value="month">month</md-radio-button>
    </md-radio-group>
<md-button class="md-raised" style="position:absolute;right:10px;top:550px" ng-click="nextDay()">
Keep {{-ctrl.pumpsurplus | number:1}} GWh 
<md-icon ng-bind="'navigate_next'"></md-icon>
</md-button>
<div class="loading" ng-show="ctrl.loading">loading ...</div>

    <hydrostorage date="ctrl.date" ctrl="ctrl"></hydrostorage>

    <md-tabs md-dynamic-height md-border-bottom md-selected="selectedIndex">
      <md-tab label="Chart">
        <md-content class="md-padding">
          <chart ctrl="ctrl" ></chart>
        </md-content>
      </md-tab>

<!--
<table>
<tr ng-repeat="(key,value) in free">
<td>{{key}}</td><td> {{value|number:2}} GWh</td>
</tr>
</table>
-->
      <md-tab label="table">
        <md-content class="md-padding">
<table class="table">
<tr>
<th></th>
<th>Original GWh</th>
<th>Delta in GWh</th>
<th>Ist in GWh</th>
<th> Ø in GW</th>
<th>Type</th>
<th>min GW</th>
<th>max GW</th>
</td>
</tr>
<tr ng-repeat="(key,value) in sources">
<td>{{key}}</td>
<td><span ng-if="originalTotal"> {{originalTotal[key]|number:0}} </span></td>
<td><span ng-if="free[key]">{{free[key]|number:0}} </span></td>
<td><span ng-if="total[key]">{{total[key]|number:0}} </span></td>
<td><span ng-if="total[key]">{{total[key]/30/34|number:2}} </span></td>
<td><span ng-if="sources[key].type">{{sources[key].type}} </span></td>
<td><span ng-if="sources[key].minpower">{{sources[key].minpower}} </span></td>
<td><span ng-if="sources[key].maxpower">{{sources[key].maxpower}} </span></td>

</tr>
</table>

        </md-content>
      </md-tab>


      <md-tab label="Statistics">
        <md-content class="md-padding">
 


    <pie type="'Tabelle1'" year="'Summe'" title="'Total'"></pie>
<!--
<p>Diese Tabelle zeigt den Energieverbrauch der Endverbraucher. Umwandlungsverluste sind bereits abgezogen. Ungefähr 1/4 der Energie geht durch Umwandlung verloren. </p>
<p>Das betrifft vor allem die Elektrische Energie die durch Verbrennung gewonnen wird. (~%50 Verlust)</p>
<p>Ungefähr ein drittel der Energie beziehen wir in der Form von Erdölprodukten. Die 110TWh könnten durch elektische 30TWh ersetzt werden.
-->
    <pie type="'Tabelle1'" year="'Traktion'" title="'Verkehr'"></pie>
<!--PKW, LKW, Flugzeuge, Eisenbahn, Straßenbahn, ...-->
    <pie type="'Tabelle1'" year="'Raumheizung und Klimaanlagen'" title="'Raumheizung und Klimaanlagen'"></pie>
    <pie type="'Tabelle1'" year="'Dampferzeugung'" title="'Dampferzeugung'"></pie>
    <pie type="'Tabelle1'" year="'Industrieöfen'" title="'Industrieöfen'"></pie>
    <pie type="'Tabelle1'" year="'Standmotoren'" title="'Standmotoren'"></pie>
    <pie type="'Tabelle1'" year="'Beleuchtung und EDV'" title="'Beleuchtung und EDV'"></pie>
<h4>Maßnahmen</h4>
<p>Transport elektrifizieren</p>
<p>Häuser dämmen</p>
<hr/>
    <pie type="'Gesamtenergiebilanz'" year="'2016'"></pie>
    <pie type="'Erdölbilanz'" year="'2016'"></pie>
    <pie type="'Gasbilanz'" year="'2016'"></pie>
    <pie type="'Kohlebilanz'" year="'2016'"></pie>
    <pie type="'Erneuerbare'" year="'2016'"></pie>
        </md-content>
      </md-tab>
    </md-tabs>
<!--
<pre>{{originalTotal|json}}</pre>
<pre>{{total|json}}</pre>
<pre>{{free|json}}</pre>
<pre>{{mutate|json}}</pre>
  </div>
    <div class="energycontainer">
    <div class="energybox"></div>
    <div style="height:{{currentEnergy(ctrl.date)}}px" class="energy">{{currentEnergy(ctrl.date)*10}} GWh</div>
    </div>
-->

<!--
    <nvd3 options="options" data="data"></nvd3>
-->
<pre>{{ctrl|json}}</pre>
  </body>

</html>
